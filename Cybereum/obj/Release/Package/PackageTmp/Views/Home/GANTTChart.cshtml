@{
    ViewBag.Title = "GANTT Chart";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@*<html>
<head>*@
    <script src="https://cdn.anychart.com/releases/8.6.0/js/anychart-core.min.js"> </script>
    <script src="https://cdn.anychart.com/releases/8.6.0/js/anychart-gantt.min.js"></script>
@*</head>
<body>*@
<div class=" form-horizontal">
    <h4>GANTT Chart</h4>
    <hr />
</div>
<div class="col-6">
    <a href="@Url.Action("List", "Project")"><h4>Back To List</h4></a>
</div>
    <div id="container" style="height:500px"> </div>
    <script>
        anychart.onDocumentReady(function () {            
            // create data
            var projectid="@ViewBag.projectid";
    $.ajax({
        type: 'GET',
        url: '@Url.Action("getgannchart")?projectid='+ projectid ,
        datatype: JSON,
        data: {
        },
        contentType: "text/json",
        success: function (data) {
            debugger;
            data = $.parseJSON(data);
            // set the input date/time format
            anychart.format.inputDateTimeFormat("yyyy-MM-dd");
            // create a data tree
            var treeData = anychart.data.tree(data, "as-tree");

            // create a chart
            var chart = anychart.ganttProject();

            var header = chart.getTimeline().header();
            //header.level(0).format("{%tickValue}{dateTimeFormat:dd-MMM}");
            //chart.dataGrid().column(0).enabled(false);
            //header.level(1).format("{%value}");

            header.level(0).format("{%tickValue}{dateTimeFormat:dd MMM}");
            header.level(1).format("{%value}");
            header.level(2).format("{%value}-{%endValue}");
            //header.level(0).format("{%value}-{%endValue}");

            //var header = chart.getTimeline().header();
            //header.level(0).format(function () {
            //    var duration = (this.end - this.tickValue) / 1000 / 3600 / 24;
            //    return this.value + ": " + duration + " days"
            //});

            // set the data
            chart.data(treeData);

            // set the position of the splitter
            chart.splitterPosition("30%");


            //// configure the scale
            //chart.getTimeline().scale().maximum(Date.UTC(2023, 06, 30));
            // set the container id
            chart.container("container");
            // initiate drawing the chart
            chart.draw();
            // fit elements to the width of the timeline
            //chart.fitAll();
            chart.fitToTask("1");

        }
    });

        });

    </script>
@*</body>
</html>*@